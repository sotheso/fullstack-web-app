# راهنمای راه‌اندازی SMS

## مشکل فعلی
خطای "کلید کنسول معتبر نیست" به این معنی است که کلید API استفاده شده معتبر نیست.

## راه حل

### 1. دریافت کلید API از ملی‌پیامک

1. به سایت [melipayamak.com](https://melipayamak.com) بروید
2. حساب کاربری ایجاد کنید یا وارد شوید
3. از پنل کاربری، کلید API خود را دریافت کنید
4. شماره فرستنده (Sender Number) خود را دریافت کنید

### 2. تنظیم متغیرهای محیطی

فایل `.env` در پوشه `backend` ایجاد کنید:

```bash
# در پوشه backend
touch .env
```

محتوای فایل `.env`:
```env
MELIPAYAMAK_API_KEY=your_actual_api_key_here
MELIPAYAMAK_FROM=your_sender_number_here
```

### 3. راه‌اندازی مجدد سرور

```bash
cd backend
npm run dev
```

### 4. تست SMS

برای تست، به آدرس زیر بروید:
```
http://localhost:5001/api/sms/test
```

## مثال کامل

اگر کلید API شما `abc123def456` و شماره فرستنده شما `50001234567` باشد:

```env
MELIPAYAMAK_API_KEY=abc123def456
MELIPAYAMAK_FROM=50001234567
```

## نکات مهم

- **کلید API**: باید از پنل ملی‌پیامک دریافت شود
- **شماره فرستنده**: باید در حساب شما فعال باشد
- **اعتبار**: اطمینان حاصل کنید که حساب شما اعتبار کافی دارد
- **تست**: ابتدا با شماره خودتان تست کنید

## عیب‌یابی

### خطاهای رایج:

1. **"کلید کنسول معتبر نیست"**: کلید API اشتباه است
2. **"شماره فرستنده معتبر نیست"**: شماره فرستنده اشتباه است
3. **"اعتبار کافی نیست"**: حساب شما اعتبار ندارد
4. **"شماره گیرنده معتبر نیست"**: فرمت شماره موبایل اشتباه است

### بررسی لاگ‌ها:

```bash
# در پوشه backend
npm run dev
```

لاگ‌های سرور را بررسی کنید تا جزئیات خطا را ببینید.
